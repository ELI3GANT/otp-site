<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Insights | Only True Perspective</title>
  <meta name="description" content="Strategic deconstructions of visual culture, high-retention editing, and the business of creative direction." />
  
  <!-- SEO / Social -->
  <meta property="og:title" content="Insights | Only True Perspective" />
  <meta property="og:description" content="Tactical breakdowns and creative strategy from the OTP lab." />

  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://onlytrueperspective.tech/insights.html" />
  <link rel="canonical" href="https://onlytrueperspective.tech/insights.html" />
  <meta property="og:image" content="https://onlytrueperspective.tech/og.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="stylesheet" href="./styles.css?v=2.6" />
  <style>body { margin: 0 !important; }</style>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Syne:wght@700;800&display=swap" rel="stylesheet" />
</head>
<body class="insights-page">
  <div class="bg-fixed"></div>

  <header class="nav nav-split">
    <!-- Logo Left -->
    <a href="index.html" class="nav-logo" aria-label="OTP">
      <img src="assets/otp_v2.png" alt="OTP" class="otp-mark" />
    </a>

    <!-- Links Right -->
    <nav class="nav-links" aria-label="Primary">
      <a href="index.html#work" class="k-hover">Work</a>
      <a href="archive.html" class="k-hover">Archive</a>
      <a href="insights.html" class="active k-hover">Insights</a>
      <a href="index.html#services" class="k-hover">Services</a>
      <a href="index.html#contact" class="k-hover">Contact</a>

    </nav>

    <!-- Mobile toggle -->
    <button class="nav-toggle" type="button" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>

    <nav class="nav-drawer" aria-label="Mobile">
      <a href="index.html#work">Work</a>
      <a href="archive.html">Archive</a>
      <a href="insights.html">Insights</a>
      <a href="index.html#services">Services</a>
      <a href="index.html#contact">Contact</a>
    </nav>
  </header>

  <main class="archive-main">
    <div class="wrap">
      <header class="archive-header">
        <h1 class="syne-bold">INSIGHTS</h1>
        <!-- Neural Data Core visual -->
        <div class="header-visual">
          <svg class="neon-icon neon-neural" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Hexagonal Frame -->
            <path d="M50 5 L89 27.5 V72.5 L50 95 L11 72.5 V27.5 Z" stroke="var(--accent)" stroke-width="2" class="hex-frame" />
            <!-- Inner Glowing Brain/Core -->
            <path d="M50 30 C55 30 60 35 60 40 C60 45 55 50 50 50 C45 50 40 45 40 40 C40 35 45 30 50 30" stroke="var(--accent2)" stroke-width="1.5" class="core-outline" />
            <!-- Neural Connections -->
            <path d="M50 15 V30" stroke="var(--accent)" stroke-width="1" class="neural-node node-up" />
            <path d="M50 70 V85" stroke="var(--accent)" stroke-width="1" class="neural-node node-down" />
            <path d="M25 40 H40" stroke="var(--accent)" stroke-width="1" class="neural-node node-left" />
            <path d="M60 40 H75" stroke="var(--accent)" stroke-width="1" class="neural-node node-right" />
            <!-- Data Glitch Particles -->
            <rect x="70" y="25" width="4" height="4" fill="var(--accent2)" class="glitch-particle p1" />
            <rect x="25" y="65" width="4" height="2" fill="var(--accent)" class="glitch-particle p2" />
            <path d="M40 50 L60 50" stroke="var(--accent2)" stroke-width="2" class="pulse-line-neural" />
            <circle cx="50" cy="50" r="12" fill="var(--accent2)" opacity="0.2" class="core-glow-neural" />
          </svg>
        </div>
      </header>

      <div class="center-text" style="margin-bottom: 60px;">
        <p class="muted">Blogs, updates, strategy discussions, content teasers, and cinematic deconstructions from the lab.</p>
      </div>




      <div class="insights-grid">
        <!-- Content populated dynamically from Supabase -->
        <div class="loader" style="grid-column: 1/-1; text-align: center; color: var(--muted);">LOADING SIGNAL...</div>
      </div>

      <!-- Subscribe / Connect Section -->
      <section class="subscribe-section center-text">
        <h3 class="syne-bold">Visual Intelligence. Delivered.</h3>
        <p class="muted">Exclusive blogs, visual updates, strategy discussions, and content teasers you won't find anywhere else.</p>
        <form action="https://formspree.io/f/mwvprvll" method="POST" class="subscribe-form">
          <input type="email" name="email" placeholder="email@address.com" required>
          <button type="submit" class="k-hover">Subscribe</button>
        </form>
        <p class="muted" style="margin-top: 30px; font-style: italic;">Information is potential. Execution is power. <a href="index.html#contact" style="color: var(--accent2); text-decoration: none; font-weight: 600;">Let's build something iconic.</a></p>
      </section>


      <div class="insights-footer-nav center-text">
        <a href="index.html" class="k-hover">Home</a>
        <span class="dot">•</span>
        <a href="archive.html" class="k-hover">Archive</a>
        <span class="dot">•</span>
        <a href="index.html#contact" class="k-hover">Contact</a>
      </div>

    </div>
  </main>

  <footer class="footer">
    <div class="wrap footer-inner">
      <div class="footer-left">
        <div class="nav-logo" aria-label="OTP">
          <img src="assets/otp_v2.png" alt="OTP logo" class="nav-gif" />
        </div>
        <div class="fineprint">© <span id="year"></span> Only True Perspective. All rights reserved.</div>
        <div class="footer-legal">
          <a href="terms.html">Terms</a>
          <span class="dot">•</span>
          <a href="privacy.html">Privacy</a>
        </div>
      </div>

      <div class="footer-right">
        <a href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'}); return false;">Back to top ↑</a>
      </div>
    </div>
  </footer>

  <canvas id="cursor-canvas"></canvas>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://unpkg.com/kursor"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  
  <script>
    // Page-specific: Fetch Insights & Spotlight Effect
    document.addEventListener("DOMContentLoaded", async () => {
        
        // 1. SUPABASE FETCH
        const SUPABASE_URL = 'https://ckumhowhucbbmpdeqkrl.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNrdW1ob3dodWNiYm1wZGVxa3JsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4NzQ3NjcsImV4cCI6MjA4MzQ1MDc2N30.yIJ1diGLWjtLWm8P2D5flF2nd0xPKn_8x2RR3DlIrag';
        
        try {
            if (window.supabase) {
                const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                
                // Fetch published posts
                const { data: posts, error } = await supabase
                    .from('posts')
                    .select('*')
                    .eq('published', true)
                    .order('created_at', { ascending: false });

                if (!error && posts && posts.length > 0) {
                    const grid = document.querySelector('.insights-grid');
                    grid.innerHTML = ''; // Clear loader
                    
                    const seenSlugs = new Set();

                    posts.forEach(post => {
                        if (seenSlugs.has(post.slug)) return; // Client-side Dedupe
                        seenSlugs.add(post.slug);

                        const date = new Date(post.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                        
                        // Handle special case for Spooky (External/Static file) vs Dynamic
                        let link = `insight.html?slug=${post.slug}`;
                        if (post.slug === 'spooky-luh-ooky') link = 'spooky-luh-ooky.html';
                        
                        // Create Card HTML
                        const card = document.createElement('article');
                        card.className = 'insight-card k-hover';
                        card.innerHTML = `
                            <div class="insight-date">${date} • ${post.category || 'Insight'}</div>
                            <h2>${post.title}</h2>
                            <p>${post.excerpt || post.content.substring(0, 100) + '...'}</p>
                            <a href="${link}" class="read-more">Read Insight</a>
                        `;
                        
                        grid.appendChild(card);
                    });
                } else {
                    document.querySelector('.insights-grid').innerHTML = '<div style="grid-column: 1/-1; text-align:center;">No signals detected.</div>';
                }
            }
        } catch (e) {
            console.error("Error fetching insights:", e);
        }


        // 2. Spotlight Effect (Re-run for new elements)
        const cards = document.querySelectorAll('.insight-card');
        if (cards.length > 0) {
            cards.forEach(card => {
              card.addEventListener('mousemove', e => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                card.style.setProperty('--mouse-x', `${x}px`);
                card.style.setProperty('--mouse-y', `${y}px`);
              });
            });
        }
        
        // Immediate visibility ensure
        if (typeof gsap !== 'undefined') {
            gsap.set('.insight-card', { opacity: 1, y: 0 });
            gsap.from('.insight-card', { opacity: 0, y: 20, stagger: 0.1, duration: 0.8 });
        }
    });
  </script>

  <script src="stars-v2.js"></script>
  <script src="site-init.js"></script>
</body>
</html>
